
    @Mock
    private AuthConfig authConfig;

    @Mock
    private CacheService cacheService;

    @Mock
    private ApplicationProperties properties;

    @Mock
    private WebClient webClient;

    @Mock
    private ServerWebExchange exchange;

    @Mock
    private ServerHttpRequest request;

    @Mock
    private ServerHttpResponse response;

    @Mock
    private GatewayFilterChain chain;

    @InjectMocks
    private AuthenticationFilter filter;

    @BeforeEach
    void setup() {
        filter = new AuthenticationFilter(WebClient.builder());

        // Properly mock the exchange, request, and response
        when(exchange.getRequest()).thenReturn(request);
        when(exchange.getResponse()).thenReturn(response);
    }
